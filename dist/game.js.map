{"version":3,"sources":["webpack:///webpack/bootstrap 631b01f4c619a0913e26","webpack:///./lib/iscroll-probe.js","webpack:///./src/game.js"],"names":["TEMPLATE","fn","window","startGame","raf","requestAnimationFrame","webkitRequestAnimationFrame","setTimeout","caf","cancelAnimationFrame","webkitCancelAnimationFrame","id","clearTimeout","distance","x1","y1","x2","y2","Math","sqrt","getIndexInMatrix","x","y","width","height","getColorVectorInImageData","data","i","setColorVectorInImageData","color","walkMatrix","j","walkCircle","cx","cy","r1","r2","dist","document","addEventListener","e","preventDefault","viewport","body","getBoundingClientRect","stageEl","getElementById","stageView","style","backgroundImage","mapEl","mapView","mapStageRatio","mapMiniCanvas","querySelector","mapMiniCtx","getContext","fillStyle","fillRect","mapIndiEl","mapIndiView","updateMap","transform","clearMap","stageNoiseCanvas","stageNoiseView","stageNoiseCtx","globalCompositeOperation","cachedNoiseCanvas","createElement","cachedNoiseCtx","noiseImageData","ImageData","makeNoise","simplex","SimplexNoise","value","noise2D","putImageData","drawNoise","clearRect","clearNoiseId","startClearNoise","lastX","lastY","clearByPath","startX","startY","endX","endY","stepAmount","dx","dy","rad","atan","tan","stepCount","stepX","stepY","steps","radius","r","abs","min","push","tick","length","step","shift","stageNoiseGradient","createRadialGradient","addColorStop","beginPath","arc","PI","fill","closePath","cachedNoiseGradient","stopClearNoise","getImageData","myScroll","IScroll","mouseWheel","deceleration","probeType","scrollX","scrollY","freeScroll","bounce","disableMouse","disablePointer","isScrolling","scrollRecord","scrollStart","round","scroll","scrollEnd","scrollTo","on","logoEl","flashLogo","handler","removeEventListener","className","random"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,wCAAwC;;AAEjE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,mDAAkD,6BAA6B;;AAE/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gCAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,iCAAgC,UAAU;AAC1C,gCAA+B,UAAU;;AAEzC;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;AACD;AACA;AACA;AACA,8CAA6C;;AAE7C;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mCAAkC,8CAA8C;;AAEhF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA2C;;AAE3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA,6CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C;AAC3C,cAAa;AACb,4CAA2C;AAC3C,cAAa;AACb,4CAA2C;AAC3C;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8LAA6L;AAC7L,6LAA4L;AAC5L;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA,4CAA2C;;AAE3C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAe,OAAO;AACtB;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;;AAGA;AACA,kDAAiD,KAAK;AACtD;AACA;AACA;;;AAGA;;AAEA,MAAK;;AAEL;AACA;;;AAGA;AACA,kDAAiD,KAAK;AACtD;AACA;AACA;;;AAGA;;AAEA,MAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,8CAA6C,KAAK;AAClD;AACA;AACA;;;AAGA;;AAEA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAwC,KAAK;AAC7C;AACA;;AAEA;AACA;AACA;AACA,sDAAqD,KAAK;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;;;AAGA;AACA;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA;AACA;AACA,cAAa;;AAEb;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA,qBAAoB;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAqD;AACrD,kEAAiE,2BAA2B,sBAAsB,kBAAkB,2BAA2B,uCAAuC;AACtM;;AAEA;;AAEA;AACA;AACA,0CAAyC,WAAW,SAAS,UAAU;AACvE;AACA;AACA;AACA,MAAK;AACL;AACA,0CAAyC,UAAU,WAAW,QAAQ;AACtE;AACA;AACA;AACA;;AAEA,kCAAiC;;AAEjC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA,UAAS;AACT;AACA;;;AAGA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA,2CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA,EAAC;AACD,wDAA6B,gBAAgB,EAAE;AAC/C,EAAC;AACD;AACA;;AAEA,EAAC,0B;;;;;;;;ACnmED,KAAMA,0MAAN;;AAUA,EAAC,UAASC,EAAT,EAAa;;AAEVC,YAAOC,SAAP,GAAmBF,EAAnB;AACH,EAHD,EAGG,YAAW;AACV,SAAIG,MAAMF,OAAOG,qBAAP,IACEH,OAAOI,2BADT,IAEE,UAASL,EAAT,EAAa;AAAC,gBAAOM,WAAWN,EAAX,EAAe,IAAI,EAAnB,CAAP;AAA8B,MAFxD;;AAIA,SAAIO,MAAMN,OAAOO,oBAAP,IACEP,OAAOQ,0BADT,IAEE,UAASC,EAAT,EAAa;AAACC,sBAAaD,EAAb;AAAiB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","file":"game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 631b01f4c619a0913e26","/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */\n(function (window, document, Math) {\nvar rAF = window.requestAnimationFrame  ||\n    window.webkitRequestAnimationFrame  ||\n    window.mozRequestAnimationFrame     ||\n    window.oRequestAnimationFrame       ||\n    window.msRequestAnimationFrame      ||\n    function (callback) { window.setTimeout(callback, 1000 / 60); };\n\nvar utils = (function () {\n    var me = {};\n\n    var _elementStyle = document.createElement('div').style;\n    var _vendor = (function () {\n        var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\n            transform,\n            i = 0,\n            l = vendors.length;\n\n        for ( ; i < l; i++ ) {\n            transform = vendors[i] + 'ransform';\n            if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\n        }\n\n        return false;\n    })();\n\n    function _prefixStyle (style) {\n        if ( _vendor === false ) return false;\n        if ( _vendor === '' ) return style;\n        return _vendor + style.charAt(0).toUpperCase() + style.substr(1);\n    }\n\n    me.getTime = Date.now || function getTime () { return new Date().getTime(); };\n\n    me.extend = function (target, obj) {\n        for ( var i in obj ) {\n            target[i] = obj[i];\n        }\n    };\n\n    me.addEvent = function (el, type, fn, capture) {\n        el.addEventListener(type, fn, !!capture);\n    };\n\n    me.removeEvent = function (el, type, fn, capture) {\n        el.removeEventListener(type, fn, !!capture);\n    };\n\n    me.prefixPointerEvent = function (pointerEvent) {\n        return window.MSPointerEvent ?\n            'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8):\n            pointerEvent;\n    };\n\n    me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\n        var distance = current - start,\n            speed = Math.abs(distance) / time,\n            destination,\n            duration;\n\n        deceleration = deceleration === undefined ? 0.0006 : deceleration;\n\n        destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );\n        duration = speed / deceleration;\n\n        if ( destination < lowerMargin ) {\n            destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;\n            distance = Math.abs(destination - current);\n            duration = distance / speed;\n        } else if ( destination > 0 ) {\n            destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;\n            distance = Math.abs(current) + destination;\n            duration = distance / speed;\n        }\n\n        return {\n            destination: Math.round(destination),\n            duration: duration\n        };\n    };\n\n    var _transform = _prefixStyle('transform');\n\n    me.extend(me, {\n        hasTransform: _transform !== false,\n        hasPerspective: _prefixStyle('perspective') in _elementStyle,\n        hasTouch: 'ontouchstart' in window,\n        hasPointer: !!(window.PointerEvent || window.MSPointerEvent), // IE10 is prefixed\n        hasTransition: _prefixStyle('transition') in _elementStyle\n    });\n\n    /*\n    This should find all Android browsers lower than build 535.19 (both stock browser and webview)\n    - galaxy S2 is ok\n    - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`\n    - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\n   - galaxy S3 is badAndroid (stock brower, webview)\n     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\n   - galaxy S4 is badAndroid (stock brower, webview)\n     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\n   - galaxy S5 is OK\n     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\n   - galaxy S6 is OK\n     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\n  */\n    me.isBadAndroid = (function() {\n        var appVersion = window.navigator.appVersion;\n        // Android browser is not a chrome browser.\n        if (/Android/.test(appVersion) && !(/Chrome\\/\\d/.test(appVersion))) {\n            var safariVersion = appVersion.match(/Safari\\/(\\d+.\\d)/);\n            if(safariVersion && typeof safariVersion === \"object\" && safariVersion.length >= 2) {\n                return parseFloat(safariVersion[1]) < 535.19;\n            } else {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    })();\n\n    me.extend(me.style = {}, {\n        transform: _transform,\n        transitionTimingFunction: _prefixStyle('transitionTimingFunction'),\n        transitionDuration: _prefixStyle('transitionDuration'),\n        transitionDelay: _prefixStyle('transitionDelay'),\n        transformOrigin: _prefixStyle('transformOrigin')\n    });\n\n    me.hasClass = function (e, c) {\n        var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\n        return re.test(e.className);\n    };\n\n    me.addClass = function (e, c) {\n        if ( me.hasClass(e, c) ) {\n            return;\n        }\n\n        var newclass = e.className.split(' ');\n        newclass.push(c);\n        e.className = newclass.join(' ');\n    };\n\n    me.removeClass = function (e, c) {\n        if ( !me.hasClass(e, c) ) {\n            return;\n        }\n\n        var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\n        e.className = e.className.replace(re, ' ');\n    };\n\n    me.offset = function (el) {\n        var left = -el.offsetLeft,\n            top = -el.offsetTop;\n\n        // jshint -W084\n        while (el = el.offsetParent) {\n            left -= el.offsetLeft;\n            top -= el.offsetTop;\n        }\n        // jshint +W084\n\n        return {\n            left: left,\n            top: top\n        };\n    };\n\n    me.preventDefaultException = function (el, exceptions) {\n        for ( var i in exceptions ) {\n            if ( exceptions[i].test(el[i]) ) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    me.extend(me.eventType = {}, {\n        touchstart: 1,\n        touchmove: 1,\n        touchend: 1,\n\n        mousedown: 2,\n        mousemove: 2,\n        mouseup: 2,\n\n        pointerdown: 3,\n        pointermove: 3,\n        pointerup: 3,\n\n        MSPointerDown: 3,\n        MSPointerMove: 3,\n        MSPointerUp: 3\n    });\n\n    me.extend(me.ease = {}, {\n        quadratic: {\n            style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n            fn: function (k) {\n                return k * ( 2 - k );\n            }\n        },\n        circular: {\n            style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',   // Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\n            fn: function (k) {\n                return Math.sqrt( 1 - ( --k * k ) );\n            }\n        },\n        back: {\n            style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n            fn: function (k) {\n                var b = 4;\n                return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;\n            }\n        },\n        bounce: {\n            style: '',\n            fn: function (k) {\n                if ( ( k /= 1 ) < ( 1 / 2.75 ) ) {\n                    return 7.5625 * k * k;\n                } else if ( k < ( 2 / 2.75 ) ) {\n                    return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n                } else if ( k < ( 2.5 / 2.75 ) ) {\n                    return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n                } else {\n                    return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n                }\n            }\n        },\n        elastic: {\n            style: '',\n            fn: function (k) {\n                var f = 0.22,\n                    e = 0.4;\n\n                if ( k === 0 ) { return 0; }\n                if ( k == 1 ) { return 1; }\n\n                return ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );\n            }\n        }\n    });\n\n    me.tap = function (e, eventName) {\n        var ev = document.createEvent('Event');\n        ev.initEvent(eventName, true, true);\n        ev.pageX = e.pageX;\n        ev.pageY = e.pageY;\n        e.target.dispatchEvent(ev);\n    };\n\n    me.click = function (e) {\n        var target = e.target,\n            ev;\n\n        if ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent\n            // initMouseEvent is deprecated.\n            ev = document.createEvent(window.MouseEvent ? 'MouseEvents' : 'Event');\n            ev.initEvent('click', true, true);\n            ev.view = e.view || window;\n            ev.detail = 1;\n            ev.screenX = target.screenX || 0;\n            ev.screenY = target.screenY || 0;\n            ev.clientX = target.clientX || 0;\n            ev.clientY = target.clientY || 0;\n            ev.ctrlKey = !!e.ctrlKey;\n            ev.altKey = !!e.altKey;\n            ev.shiftKey = !!e.shiftKey;\n            ev.metaKey = !!e.metaKey;\n            ev.button = 0;\n            ev.relatedTarget = null;\n            ev._constructed = true;\n            target.dispatchEvent(ev);\n        }\n    };\n\n    return me;\n})();\nfunction IScroll (el, options) {\n    this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\n    this.scroller = this.wrapper.children[0];\n    this.scrollerStyle = this.scroller.style;       // cache style for better performance\n\n    this.options = {\n\n        resizeScrollbars: true,\n\n        mouseWheelSpeed: 20,\n\n        snapThreshold: 0.334,\n\n// INSERT POINT: OPTIONS\n        disablePointer : !utils.hasPointer,\n        disableTouch : utils.hasPointer || !utils.hasTouch,\n        disableMouse : utils.hasPointer || utils.hasTouch,\n        startX: 0,\n        startY: 0,\n        scrollY: true,\n        directionLockThreshold: 5,\n        momentum: true,\n\n        bounce: true,\n        bounceTime: 600,\n        bounceEasing: '',\n\n        preventDefault: true,\n        preventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },\n\n        HWCompositing: true,\n        useTransition: true,\n        useTransform: true,\n        bindToWrapper: typeof window.onmousedown === \"undefined\"\n    };\n\n    for ( var i in options ) {\n        this.options[i] = options[i];\n    }\n\n    // Normalize options\n    this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\n\n    this.options.useTransition = utils.hasTransition && this.options.useTransition;\n    this.options.useTransform = utils.hasTransform && this.options.useTransform;\n\n    this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\n    this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\n\n    this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\n\n    if ( this.options.tap === true ) {\n        this.options.tap = 'tap';\n    }\n\n    // https://github.com/cubiq/iscroll/issues/1029\n    if (!this.options.useTransition && !this.options.useTransform) {\n        if(!(/relative|absolute/i).test(this.scrollerStyle.position)) {\n            this.scrollerStyle.position = \"relative\";\n        }\n    }\n\n    if ( this.options.shrinkScrollbars == 'scale' ) {\n        this.options.useTransition = false;\n    }\n\n    this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;\n\n    if ( this.options.probeType == 3 ) {\n        this.options.useTransition = false; }\n\n// INSERT POINT: NORMALIZATION\n\n    // Some defaults\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this._events = {};\n\n// INSERT POINT: DEFAULTS\n\n    this._init();\n    this.refresh();\n\n    this.scrollTo(this.options.startX, this.options.startY);\n    this.enable();\n}\n\nIScroll.prototype = {\n    version: '5.2.0',\n\n    _init: function () {\n        this._initEvents();\n\n        if ( this.options.scrollbars || this.options.indicators ) {\n            this._initIndicators();\n        }\n\n        if ( this.options.mouseWheel ) {\n            this._initWheel();\n        }\n\n        if ( this.options.snap ) {\n            this._initSnap();\n        }\n\n        if ( this.options.keyBindings ) {\n            this._initKeys();\n        }\n\n// INSERT POINT: _init\n\n    },\n\n    destroy: function () {\n        this._initEvents(true);\n        clearTimeout(this.resizeTimeout);\n        this.resizeTimeout = null;\n        this._execEvent('destroy');\n    },\n\n    _transitionEnd: function (e) {\n        if ( e.target != this.scroller || !this.isInTransition ) {\n            return;\n        }\n\n        this._transitionTime();\n        if ( !this.resetPosition(this.options.bounceTime) ) {\n            this.isInTransition = false;\n            this._execEvent('scrollEnd');\n        }\n    },\n\n    _start: function (e) {\n        // React to left mouse button only\n        if ( utils.eventType[e.type] != 1 ) {\n          // for button property\n          // http://unixpapa.com/js/mouse.html\n          var button;\n        if (!e.which) {\n          /* IE case */\n          button = (e.button < 2) ? 0 :\n                   ((e.button == 4) ? 1 : 2);\n        } else {\n          /* All others */\n          button = e.button;\n        }\n            if ( button !== 0 ) {\n                return;\n            }\n        }\n\n        if ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {\n            return;\n        }\n\n        if ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n            e.preventDefault();\n        }\n\n        var point = e.touches ? e.touches[0] : e,\n            pos;\n\n        this.initiated  = utils.eventType[e.type];\n        this.moved      = false;\n        this.distX      = 0;\n        this.distY      = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n        this.directionLocked = 0;\n\n        this.startTime = utils.getTime();\n\n        if ( this.options.useTransition && this.isInTransition ) {\n            this._transitionTime();\n            this.isInTransition = false;\n            pos = this.getComputedPosition();\n            this._translate(Math.round(pos.x), Math.round(pos.y));\n            this._execEvent('scrollEnd');\n        } else if ( !this.options.useTransition && this.isAnimating ) {\n            this.isAnimating = false;\n            this._execEvent('scrollEnd');\n        }\n\n        this.startX    = this.x;\n        this.startY    = this.y;\n        this.absStartX = this.x;\n        this.absStartY = this.y;\n        this.pointX    = point.pageX;\n        this.pointY    = point.pageY;\n\n        this._execEvent('beforeScrollStart');\n    },\n\n    _move: function (e) {\n        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n            return;\n        }\n\n        if ( this.options.preventDefault ) {    // increases performance on Android? TODO: check!\n            e.preventDefault();\n        }\n\n        var point       = e.touches ? e.touches[0] : e,\n            deltaX      = point.pageX - this.pointX,\n            deltaY      = point.pageY - this.pointY,\n            timestamp   = utils.getTime(),\n            newX, newY,\n            absDistX, absDistY;\n\n        this.pointX     = point.pageX;\n        this.pointY     = point.pageY;\n\n        this.distX      += deltaX;\n        this.distY      += deltaY;\n        absDistX        = Math.abs(this.distX);\n        absDistY        = Math.abs(this.distY);\n\n        // We need to move at least 10 pixels for the scrolling to initiate\n        if ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {\n            return;\n        }\n\n        // If you are scrolling in one direction lock the other\n        if ( !this.directionLocked && !this.options.freeScroll ) {\n            if ( absDistX > absDistY + this.options.directionLockThreshold ) {\n                this.directionLocked = 'h';     // lock horizontally\n            } else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {\n                this.directionLocked = 'v';     // lock vertically\n            } else {\n                this.directionLocked = 'n';     // no lock\n            }\n        }\n\n        if ( this.directionLocked == 'h' ) {\n            if ( this.options.eventPassthrough == 'vertical' ) {\n                e.preventDefault();\n            } else if ( this.options.eventPassthrough == 'horizontal' ) {\n                this.initiated = false;\n                return;\n            }\n\n            deltaY = 0;\n        } else if ( this.directionLocked == 'v' ) {\n            if ( this.options.eventPassthrough == 'horizontal' ) {\n                e.preventDefault();\n            } else if ( this.options.eventPassthrough == 'vertical' ) {\n                this.initiated = false;\n                return;\n            }\n\n            deltaX = 0;\n        }\n\n        deltaX = this.hasHorizontalScroll ? deltaX : 0;\n        deltaY = this.hasVerticalScroll ? deltaY : 0;\n\n        newX = this.x + deltaX;\n        newY = this.y + deltaY;\n\n        // Slow down if outside of the boundaries\n        if ( newX > 0 || newX < this.maxScrollX ) {\n            newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n        }\n        if ( newY > 0 || newY < this.maxScrollY ) {\n            newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n        }\n\n        this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n        this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n        if ( !this.moved ) {\n            this._execEvent('scrollStart');\n        }\n\n        this.moved = true;\n\n        this._translate(newX, newY);\n\n/* REPLACE START: _move */\n        if ( timestamp - this.startTime > 300 ) {\n            this.startTime = timestamp;\n            this.startX = this.x;\n            this.startY = this.y;\n\n            if ( this.options.probeType == 1 ) {\n                this._execEvent('scroll');\n            }\n        }\n\n        if ( this.options.probeType > 1 ) {\n            this._execEvent('scroll');\n        }\n/* REPLACE END: _move */\n\n    },\n\n    _end: function (e) {\n        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n            return;\n        }\n\n        if ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n            e.preventDefault();\n        }\n\n        var point = e.changedTouches ? e.changedTouches[0] : e,\n            momentumX,\n            momentumY,\n            duration = utils.getTime() - this.startTime,\n            newX = Math.round(this.x),\n            newY = Math.round(this.y),\n            distanceX = Math.abs(newX - this.startX),\n            distanceY = Math.abs(newY - this.startY),\n            time = 0,\n            easing = '';\n\n        this.isInTransition = 0;\n        this.initiated = 0;\n        this.endTime = utils.getTime();\n\n        // reset if we are outside of the boundaries\n        if ( this.resetPosition(this.options.bounceTime) ) {\n            return;\n        }\n\n        this.scrollTo(newX, newY);  // ensures that the last position is rounded\n\n        // we scrolled less than 10 pixels\n        if ( !this.moved ) {\n            if ( this.options.tap ) {\n                utils.tap(e, this.options.tap);\n            }\n\n            if ( this.options.click ) {\n                utils.click(e);\n            }\n\n            this._execEvent('scrollCancel');\n            return;\n        }\n\n        if ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {\n            this._execEvent('flick');\n            return;\n        }\n\n        // start momentum animation if needed\n        if ( this.options.momentum && duration < 300 ) {\n            momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };\n            momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };\n            newX = momentumX.destination;\n            newY = momentumY.destination;\n            time = Math.max(momentumX.duration, momentumY.duration);\n            this.isInTransition = 1;\n        }\n\n\n        if ( this.options.snap ) {\n            var snap = this._nearestSnap(newX, newY);\n            this.currentPage = snap;\n            time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(newX - snap.x), 1000),\n                        Math.min(Math.abs(newY - snap.y), 1000)\n                    ), 300);\n            newX = snap.x;\n            newY = snap.y;\n\n            this.directionX = 0;\n            this.directionY = 0;\n            easing = this.options.bounceEasing;\n        }\n\n// INSERT POINT: _end\n\n        if ( newX != this.x || newY != this.y ) {\n            // change easing function when scroller goes out of the boundaries\n            if ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {\n                easing = utils.ease.quadratic;\n            }\n\n            this.scrollTo(newX, newY, time, easing);\n            return;\n        }\n\n        this._execEvent('scrollEnd');\n    },\n\n    _resize: function () {\n        var that = this;\n\n        clearTimeout(this.resizeTimeout);\n\n        this.resizeTimeout = setTimeout(function () {\n            that.refresh();\n        }, this.options.resizePolling);\n    },\n\n    resetPosition: function (time) {\n        var x = this.x,\n            y = this.y;\n\n        time = time || 0;\n\n        if ( !this.hasHorizontalScroll || this.x > 0 ) {\n            x = 0;\n        } else if ( this.x < this.maxScrollX ) {\n            x = this.maxScrollX;\n        }\n\n        if ( !this.hasVerticalScroll || this.y > 0 ) {\n            y = 0;\n        } else if ( this.y < this.maxScrollY ) {\n            y = this.maxScrollY;\n        }\n\n        if ( x == this.x && y == this.y ) {\n            return false;\n        }\n\n        this.scrollTo(x, y, time, this.options.bounceEasing);\n\n        return true;\n    },\n\n    disable: function () {\n        this.enabled = false;\n    },\n\n    enable: function () {\n        this.enabled = true;\n    },\n\n    refresh: function () {\n        var rf = this.wrapper.offsetHeight;     // Force reflow\n\n        this.wrapperWidth   = this.wrapper.clientWidth;\n        this.wrapperHeight  = this.wrapper.clientHeight;\n\n/* REPLACE START: refresh */\n\n        this.scrollerWidth  = this.scroller.offsetWidth;\n        this.scrollerHeight = this.scroller.offsetHeight;\n\n        this.maxScrollX     = this.wrapperWidth - this.scrollerWidth;\n        this.maxScrollY     = this.wrapperHeight - this.scrollerHeight;\n\n/* REPLACE END: refresh */\n\n        this.hasHorizontalScroll    = this.options.scrollX && this.maxScrollX < 0;\n        this.hasVerticalScroll      = this.options.scrollY && this.maxScrollY < 0;\n\n        if ( !this.hasHorizontalScroll ) {\n            this.maxScrollX = 0;\n            this.scrollerWidth = this.wrapperWidth;\n        }\n\n        if ( !this.hasVerticalScroll ) {\n            this.maxScrollY = 0;\n            this.scrollerHeight = this.wrapperHeight;\n        }\n\n        this.endTime = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n\n        this.wrapperOffset = utils.offset(this.wrapper);\n\n        this._execEvent('refresh');\n\n        this.resetPosition();\n\n// INSERT POINT: _refresh\n\n    },\n\n    on: function (type, fn) {\n        if ( !this._events[type] ) {\n            this._events[type] = [];\n        }\n\n        this._events[type].push(fn);\n    },\n\n    off: function (type, fn) {\n        if ( !this._events[type] ) {\n            return;\n        }\n\n        var index = this._events[type].indexOf(fn);\n\n        if ( index > -1 ) {\n            this._events[type].splice(index, 1);\n        }\n    },\n\n    _execEvent: function (type) {\n        if ( !this._events[type] ) {\n            return;\n        }\n\n        var i = 0,\n            l = this._events[type].length;\n\n        if ( !l ) {\n            return;\n        }\n\n        for ( ; i < l; i++ ) {\n            this._events[type][i].apply(this, [].slice.call(arguments, 1));\n        }\n    },\n\n    scrollBy: function (x, y, time, easing) {\n        x = this.x + x;\n        y = this.y + y;\n        time = time || 0;\n\n        this.scrollTo(x, y, time, easing);\n    },\n\n    scrollTo: function (x, y, time, easing) {\n        easing = easing || utils.ease.circular;\n\n        this.isInTransition = this.options.useTransition && time > 0;\n        var transitionType = this.options.useTransition && easing.style;\n        if ( !time || transitionType ) {\n                if(transitionType) {\n                    this._transitionTimingFunction(easing.style);\n                    this._transitionTime(time);\n                }\n            this._translate(x, y);\n        } else {\n            this._animate(x, y, time, easing.fn);\n        }\n    },\n\n    scrollToElement: function (el, time, offsetX, offsetY, easing) {\n        el = el.nodeType ? el : this.scroller.querySelector(el);\n\n        if ( !el ) {\n            return;\n        }\n\n        var pos = utils.offset(el);\n\n        pos.left -= this.wrapperOffset.left;\n        pos.top  -= this.wrapperOffset.top;\n\n        // if offsetX/Y are true we center the element to the screen\n        if ( offsetX === true ) {\n            offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n        }\n        if ( offsetY === true ) {\n            offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n        }\n\n        pos.left -= offsetX || 0;\n        pos.top  -= offsetY || 0;\n\n        pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n        pos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;\n\n        time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;\n\n        this.scrollTo(pos.left, pos.top, time, easing);\n    },\n\n    _transitionTime: function (time) {\n        if (!this.options.useTransition) {\n            return;\n        }\n        time = time || 0;\n        var durationProp = utils.style.transitionDuration;\n        if(!durationProp) {\n            return;\n        }\n\n        this.scrollerStyle[durationProp] = time + 'ms';\n\n        if ( !time && utils.isBadAndroid ) {\n            this.scrollerStyle[durationProp] = '0.0001ms';\n            // remove 0.0001ms\n            var self = this;\n            rAF(function() {\n                if(self.scrollerStyle[durationProp] === '0.0001ms') {\n                    self.scrollerStyle[durationProp] = '0s';\n                }\n            });\n        }\n\n\n        if ( this.indicators ) {\n            for ( var i = this.indicators.length; i--; ) {\n                this.indicators[i].transitionTime(time);\n            }\n        }\n\n\n// INSERT POINT: _transitionTime\n\n    },\n\n    _transitionTimingFunction: function (easing) {\n        this.scrollerStyle[utils.style.transitionTimingFunction] = easing;\n\n\n        if ( this.indicators ) {\n            for ( var i = this.indicators.length; i--; ) {\n                this.indicators[i].transitionTimingFunction(easing);\n            }\n        }\n\n\n// INSERT POINT: _transitionTimingFunction\n\n    },\n\n    _translate: function (x, y) {\n        if ( this.options.useTransform ) {\n\n/* REPLACE START: _translate */\n\n            this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\n\n/* REPLACE END: _translate */\n\n        } else {\n            x = Math.round(x);\n            y = Math.round(y);\n            this.scrollerStyle.left = x + 'px';\n            this.scrollerStyle.top = y + 'px';\n        }\n\n        this.x = x;\n        this.y = y;\n\n\n    if ( this.indicators ) {\n        for ( var i = this.indicators.length; i--; ) {\n            this.indicators[i].updatePosition();\n        }\n    }\n\n\n// INSERT POINT: _translate\n\n    },\n\n    _initEvents: function (remove) {\n        var eventType = remove ? utils.removeEvent : utils.addEvent,\n            target = this.options.bindToWrapper ? this.wrapper : window;\n\n        eventType(window, 'orientationchange', this);\n        eventType(window, 'resize', this);\n\n        if ( this.options.click ) {\n            eventType(this.wrapper, 'click', this, true);\n        }\n\n        if ( !this.options.disableMouse ) {\n            eventType(this.wrapper, 'mousedown', this);\n            eventType(target, 'mousemove', this);\n            eventType(target, 'mousecancel', this);\n            eventType(target, 'mouseup', this);\n        }\n\n        if ( utils.hasPointer && !this.options.disablePointer ) {\n            eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\n            eventType(target, utils.prefixPointerEvent('pointermove'), this);\n            eventType(target, utils.prefixPointerEvent('pointercancel'), this);\n            eventType(target, utils.prefixPointerEvent('pointerup'), this);\n        }\n\n        if ( utils.hasTouch && !this.options.disableTouch ) {\n            eventType(this.wrapper, 'touchstart', this);\n            eventType(target, 'touchmove', this);\n            eventType(target, 'touchcancel', this);\n            eventType(target, 'touchend', this);\n        }\n\n        eventType(this.scroller, 'transitionend', this);\n        eventType(this.scroller, 'webkitTransitionEnd', this);\n        eventType(this.scroller, 'oTransitionEnd', this);\n        eventType(this.scroller, 'MSTransitionEnd', this);\n    },\n\n    getComputedPosition: function () {\n        var matrix = window.getComputedStyle(this.scroller, null),\n            x, y;\n\n        if ( this.options.useTransform ) {\n            matrix = matrix[utils.style.transform].split(')')[0].split(', ');\n            x = +(matrix[12] || matrix[4]);\n            y = +(matrix[13] || matrix[5]);\n        } else {\n            x = +matrix.left.replace(/[^-\\d.]/g, '');\n            y = +matrix.top.replace(/[^-\\d.]/g, '');\n        }\n\n        return { x: x, y: y };\n    },\n    _initIndicators: function () {\n        var interactive = this.options.interactiveScrollbars,\n            customStyle = typeof this.options.scrollbars != 'string',\n            indicators = [],\n            indicator;\n\n        var that = this;\n\n        this.indicators = [];\n\n        if ( this.options.scrollbars ) {\n            // Vertical scrollbar\n            if ( this.options.scrollY ) {\n                indicator = {\n                    el: createDefaultScrollbar('v', interactive, this.options.scrollbars),\n                    interactive: interactive,\n                    defaultScrollbars: true,\n                    customStyle: customStyle,\n                    resize: this.options.resizeScrollbars,\n                    shrink: this.options.shrinkScrollbars,\n                    fade: this.options.fadeScrollbars,\n                    listenX: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n\n            // Horizontal scrollbar\n            if ( this.options.scrollX ) {\n                indicator = {\n                    el: createDefaultScrollbar('h', interactive, this.options.scrollbars),\n                    interactive: interactive,\n                    defaultScrollbars: true,\n                    customStyle: customStyle,\n                    resize: this.options.resizeScrollbars,\n                    shrink: this.options.shrinkScrollbars,\n                    fade: this.options.fadeScrollbars,\n                    listenY: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n        }\n\n        if ( this.options.indicators ) {\n            // TODO: check concat compatibility\n            indicators = indicators.concat(this.options.indicators);\n        }\n\n        for ( var i = indicators.length; i--; ) {\n            this.indicators.push( new Indicator(this, indicators[i]) );\n        }\n\n        // TODO: check if we can use array.map (wide compatibility and performance issues)\n        function _indicatorsMap (fn) {\n            if (that.indicators) {\n                for ( var i = that.indicators.length; i--; ) {\n                    fn.call(that.indicators[i]);\n                }\n            }\n        }\n\n        if ( this.options.fadeScrollbars ) {\n            this.on('scrollEnd', function () {\n                _indicatorsMap(function () {\n                    this.fade();\n                });\n            });\n\n            this.on('scrollCancel', function () {\n                _indicatorsMap(function () {\n                    this.fade();\n                });\n            });\n\n            this.on('scrollStart', function () {\n                _indicatorsMap(function () {\n                    this.fade(1);\n                });\n            });\n\n            this.on('beforeScrollStart', function () {\n                _indicatorsMap(function () {\n                    this.fade(1, true);\n                });\n            });\n        }\n\n\n        this.on('refresh', function () {\n            _indicatorsMap(function () {\n                this.refresh();\n            });\n        });\n\n        this.on('destroy', function () {\n            _indicatorsMap(function () {\n                this.destroy();\n            });\n\n            delete this.indicators;\n        });\n    },\n\n    _initWheel: function () {\n        utils.addEvent(this.wrapper, 'wheel', this);\n        utils.addEvent(this.wrapper, 'mousewheel', this);\n        utils.addEvent(this.wrapper, 'DOMMouseScroll', this);\n\n        this.on('destroy', function () {\n            clearTimeout(this.wheelTimeout);\n            this.wheelTimeout = null;\n            utils.removeEvent(this.wrapper, 'wheel', this);\n            utils.removeEvent(this.wrapper, 'mousewheel', this);\n            utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\n        });\n    },\n\n    _wheel: function (e) {\n        if ( !this.enabled ) {\n            return;\n        }\n\n        e.preventDefault();\n\n        var wheelDeltaX, wheelDeltaY,\n            newX, newY,\n            that = this;\n\n        if ( this.wheelTimeout === undefined ) {\n            that._execEvent('scrollStart');\n        }\n\n        // Execute the scrollEnd event after 400ms the wheel stopped scrolling\n        clearTimeout(this.wheelTimeout);\n        this.wheelTimeout = setTimeout(function () {\n            if(!that.options.snap) {\n                that._execEvent('scrollEnd');\n            }\n            that.wheelTimeout = undefined;\n        }, 400);\n\n        if ( 'deltaX' in e ) {\n            if (e.deltaMode === 1) {\n                wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;\n                wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;\n            } else {\n                wheelDeltaX = -e.deltaX;\n                wheelDeltaY = -e.deltaY;\n            }\n        } else if ( 'wheelDeltaX' in e ) {\n            wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\n            wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\n        } else if ( 'wheelDelta' in e ) {\n            wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\n        } else if ( 'detail' in e ) {\n            wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\n        } else {\n            return;\n        }\n\n        wheelDeltaX *= this.options.invertWheelDirection;\n        wheelDeltaY *= this.options.invertWheelDirection;\n\n        if ( !this.hasVerticalScroll ) {\n            wheelDeltaX = wheelDeltaY;\n            wheelDeltaY = 0;\n        }\n\n        if ( this.options.snap ) {\n            newX = this.currentPage.pageX;\n            newY = this.currentPage.pageY;\n\n            if ( wheelDeltaX > 0 ) {\n                newX--;\n            } else if ( wheelDeltaX < 0 ) {\n                newX++;\n            }\n\n            if ( wheelDeltaY > 0 ) {\n                newY--;\n            } else if ( wheelDeltaY < 0 ) {\n                newY++;\n            }\n\n            this.goToPage(newX, newY);\n\n            return;\n        }\n\n        newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n        newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n        this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n        this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n        if ( newX > 0 ) {\n            newX = 0;\n        } else if ( newX < this.maxScrollX ) {\n            newX = this.maxScrollX;\n        }\n\n        if ( newY > 0 ) {\n            newY = 0;\n        } else if ( newY < this.maxScrollY ) {\n            newY = this.maxScrollY;\n        }\n\n        this.scrollTo(newX, newY, 0);\n\n        if ( this.options.probeType > 1 ) {\n            this._execEvent('scroll');\n        }\n\n// INSERT POINT: _wheel\n    },\n\n    _initSnap: function () {\n        this.currentPage = {};\n\n        if ( typeof this.options.snap == 'string' ) {\n            this.options.snap = this.scroller.querySelectorAll(this.options.snap);\n        }\n\n        this.on('refresh', function () {\n            var i = 0, l,\n                m = 0, n,\n                cx, cy,\n                x = 0, y,\n                stepX = this.options.snapStepX || this.wrapperWidth,\n                stepY = this.options.snapStepY || this.wrapperHeight,\n                el;\n\n            this.pages = [];\n\n            if ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {\n                return;\n            }\n\n            if ( this.options.snap === true ) {\n                cx = Math.round( stepX / 2 );\n                cy = Math.round( stepY / 2 );\n\n                while ( x > -this.scrollerWidth ) {\n                    this.pages[i] = [];\n                    l = 0;\n                    y = 0;\n\n                    while ( y > -this.scrollerHeight ) {\n                        this.pages[i][l] = {\n                            x: Math.max(x, this.maxScrollX),\n                            y: Math.max(y, this.maxScrollY),\n                            width: stepX,\n                            height: stepY,\n                            cx: x - cx,\n                            cy: y - cy\n                        };\n\n                        y -= stepY;\n                        l++;\n                    }\n\n                    x -= stepX;\n                    i++;\n                }\n            } else {\n                el = this.options.snap;\n                l = el.length;\n                n = -1;\n\n                for ( ; i < l; i++ ) {\n                    if ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {\n                        m = 0;\n                        n++;\n                    }\n\n                    if ( !this.pages[m] ) {\n                        this.pages[m] = [];\n                    }\n\n                    x = Math.max(-el[i].offsetLeft, this.maxScrollX);\n                    y = Math.max(-el[i].offsetTop, this.maxScrollY);\n                    cx = x - Math.round(el[i].offsetWidth / 2);\n                    cy = y - Math.round(el[i].offsetHeight / 2);\n\n                    this.pages[m][n] = {\n                        x: x,\n                        y: y,\n                        width: el[i].offsetWidth,\n                        height: el[i].offsetHeight,\n                        cx: cx,\n                        cy: cy\n                    };\n\n                    if ( x > this.maxScrollX ) {\n                        m++;\n                    }\n                }\n            }\n\n            this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);\n\n            // Update snap threshold if needed\n            if ( this.options.snapThreshold % 1 === 0 ) {\n                this.snapThresholdX = this.options.snapThreshold;\n                this.snapThresholdY = this.options.snapThreshold;\n            } else {\n                this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\n                this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\n            }\n        });\n\n        this.on('flick', function () {\n            var time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(this.x - this.startX), 1000),\n                        Math.min(Math.abs(this.y - this.startY), 1000)\n                    ), 300);\n\n            this.goToPage(\n                this.currentPage.pageX + this.directionX,\n                this.currentPage.pageY + this.directionY,\n                time\n            );\n        });\n    },\n\n    _nearestSnap: function (x, y) {\n        if ( !this.pages.length ) {\n            return { x: 0, y: 0, pageX: 0, pageY: 0 };\n        }\n\n        var i = 0,\n            l = this.pages.length,\n            m = 0;\n\n        // Check if we exceeded the snap threshold\n        if ( Math.abs(x - this.absStartX) < this.snapThresholdX &&\n            Math.abs(y - this.absStartY) < this.snapThresholdY ) {\n            return this.currentPage;\n        }\n\n        if ( x > 0 ) {\n            x = 0;\n        } else if ( x < this.maxScrollX ) {\n            x = this.maxScrollX;\n        }\n\n        if ( y > 0 ) {\n            y = 0;\n        } else if ( y < this.maxScrollY ) {\n            y = this.maxScrollY;\n        }\n\n        for ( ; i < l; i++ ) {\n            if ( x >= this.pages[i][0].cx ) {\n                x = this.pages[i][0].x;\n                break;\n            }\n        }\n\n        l = this.pages[i].length;\n\n        for ( ; m < l; m++ ) {\n            if ( y >= this.pages[0][m].cy ) {\n                y = this.pages[0][m].y;\n                break;\n            }\n        }\n\n        if ( i == this.currentPage.pageX ) {\n            i += this.directionX;\n\n            if ( i < 0 ) {\n                i = 0;\n            } else if ( i >= this.pages.length ) {\n                i = this.pages.length - 1;\n            }\n\n            x = this.pages[i][0].x;\n        }\n\n        if ( m == this.currentPage.pageY ) {\n            m += this.directionY;\n\n            if ( m < 0 ) {\n                m = 0;\n            } else if ( m >= this.pages[0].length ) {\n                m = this.pages[0].length - 1;\n            }\n\n            y = this.pages[0][m].y;\n        }\n\n        return {\n            x: x,\n            y: y,\n            pageX: i,\n            pageY: m\n        };\n    },\n\n    goToPage: function (x, y, time, easing) {\n        easing = easing || this.options.bounceEasing;\n\n        if ( x >= this.pages.length ) {\n            x = this.pages.length - 1;\n        } else if ( x < 0 ) {\n            x = 0;\n        }\n\n        if ( y >= this.pages[x].length ) {\n            y = this.pages[x].length - 1;\n        } else if ( y < 0 ) {\n            y = 0;\n        }\n\n        var posX = this.pages[x][y].x,\n            posY = this.pages[x][y].y;\n\n        time = time === undefined ? this.options.snapSpeed || Math.max(\n            Math.max(\n                Math.min(Math.abs(posX - this.x), 1000),\n                Math.min(Math.abs(posY - this.y), 1000)\n            ), 300) : time;\n\n        this.currentPage = {\n            x: posX,\n            y: posY,\n            pageX: x,\n            pageY: y\n        };\n\n        this.scrollTo(posX, posY, time, easing);\n    },\n\n    next: function (time, easing) {\n        var x = this.currentPage.pageX,\n            y = this.currentPage.pageY;\n\n        x++;\n\n        if ( x >= this.pages.length && this.hasVerticalScroll ) {\n            x = 0;\n            y++;\n        }\n\n        this.goToPage(x, y, time, easing);\n    },\n\n    prev: function (time, easing) {\n        var x = this.currentPage.pageX,\n            y = this.currentPage.pageY;\n\n        x--;\n\n        if ( x < 0 && this.hasVerticalScroll ) {\n            x = 0;\n            y--;\n        }\n\n        this.goToPage(x, y, time, easing);\n    },\n\n    _initKeys: function (e) {\n        // default key bindings\n        var keys = {\n            pageUp: 33,\n            pageDown: 34,\n            end: 35,\n            home: 36,\n            left: 37,\n            up: 38,\n            right: 39,\n            down: 40\n        };\n        var i;\n\n        // if you give me characters I give you keycode\n        if ( typeof this.options.keyBindings == 'object' ) {\n            for ( i in this.options.keyBindings ) {\n                if ( typeof this.options.keyBindings[i] == 'string' ) {\n                    this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\n                }\n            }\n        } else {\n            this.options.keyBindings = {};\n        }\n\n        for ( i in keys ) {\n            this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\n        }\n\n        utils.addEvent(window, 'keydown', this);\n\n        this.on('destroy', function () {\n            utils.removeEvent(window, 'keydown', this);\n        });\n    },\n\n    _key: function (e) {\n        if ( !this.enabled ) {\n            return;\n        }\n\n        var snap = this.options.snap,   // we are using this alot, better to cache it\n            newX = snap ? this.currentPage.pageX : this.x,\n            newY = snap ? this.currentPage.pageY : this.y,\n            now = utils.getTime(),\n            prevTime = this.keyTime || 0,\n            acceleration = 0.250,\n            pos;\n\n        if ( this.options.useTransition && this.isInTransition ) {\n            pos = this.getComputedPosition();\n\n            this._translate(Math.round(pos.x), Math.round(pos.y));\n            this.isInTransition = false;\n        }\n\n        this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\n\n        switch ( e.keyCode ) {\n            case this.options.keyBindings.pageUp:\n                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n                    newX += snap ? 1 : this.wrapperWidth;\n                } else {\n                    newY += snap ? 1 : this.wrapperHeight;\n                }\n                break;\n            case this.options.keyBindings.pageDown:\n                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n                    newX -= snap ? 1 : this.wrapperWidth;\n                } else {\n                    newY -= snap ? 1 : this.wrapperHeight;\n                }\n                break;\n            case this.options.keyBindings.end:\n                newX = snap ? this.pages.length-1 : this.maxScrollX;\n                newY = snap ? this.pages[0].length-1 : this.maxScrollY;\n                break;\n            case this.options.keyBindings.home:\n                newX = 0;\n                newY = 0;\n                break;\n            case this.options.keyBindings.left:\n                newX += snap ? -1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.up:\n                newY += snap ? 1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.right:\n                newX -= snap ? -1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.down:\n                newY -= snap ? 1 : 5 + this.keyAcceleration>>0;\n                break;\n            default:\n                return;\n        }\n\n        if ( snap ) {\n            this.goToPage(newX, newY);\n            return;\n        }\n\n        if ( newX > 0 ) {\n            newX = 0;\n            this.keyAcceleration = 0;\n        } else if ( newX < this.maxScrollX ) {\n            newX = this.maxScrollX;\n            this.keyAcceleration = 0;\n        }\n\n        if ( newY > 0 ) {\n            newY = 0;\n            this.keyAcceleration = 0;\n        } else if ( newY < this.maxScrollY ) {\n            newY = this.maxScrollY;\n            this.keyAcceleration = 0;\n        }\n\n        this.scrollTo(newX, newY, 0);\n\n        this.keyTime = now;\n    },\n\n    _animate: function (destX, destY, duration, easingFn) {\n        var that = this,\n            startX = this.x,\n            startY = this.y,\n            startTime = utils.getTime(),\n            destTime = startTime + duration;\n\n        function step () {\n            var now = utils.getTime(),\n                newX, newY,\n                easing;\n\n            if ( now >= destTime ) {\n                that.isAnimating = false;\n                that._translate(destX, destY);\n                \n                if ( !that.resetPosition(that.options.bounceTime) ) {\n                    that._execEvent('scrollEnd');\n                }\n\n                return;\n            }\n\n            now = ( now - startTime ) / duration;\n            easing = easingFn(now);\n            newX = ( destX - startX ) * easing + startX;\n            newY = ( destY - startY ) * easing + startY;\n            that._translate(newX, newY);\n\n            if ( that.isAnimating ) {\n                rAF(step);\n            }\n\n            if ( that.options.probeType == 3 ) {\n                that._execEvent('scroll');\n            }\n        }\n\n        this.isAnimating = true;\n        step();\n    },\n\n    handleEvent: function (e) {\n        switch ( e.type ) {\n            case 'touchstart':\n            case 'pointerdown':\n            case 'MSPointerDown':\n            case 'mousedown':\n                this._start(e);\n                break;\n            case 'touchmove':\n            case 'pointermove':\n            case 'MSPointerMove':\n            case 'mousemove':\n                this._move(e);\n                break;\n            case 'touchend':\n            case 'pointerup':\n            case 'MSPointerUp':\n            case 'mouseup':\n            case 'touchcancel':\n            case 'pointercancel':\n            case 'MSPointerCancel':\n            case 'mousecancel':\n                this._end(e);\n                break;\n            case 'orientationchange':\n            case 'resize':\n                this._resize();\n                break;\n            case 'transitionend':\n            case 'webkitTransitionEnd':\n            case 'oTransitionEnd':\n            case 'MSTransitionEnd':\n                this._transitionEnd(e);\n                break;\n            case 'wheel':\n            case 'DOMMouseScroll':\n            case 'mousewheel':\n                this._wheel(e);\n                break;\n            case 'keydown':\n                this._key(e);\n                break;\n            case 'click':\n                if ( this.enabled && !e._constructed ) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n        }\n    }\n};\nfunction createDefaultScrollbar (direction, interactive, type) {\n    var scrollbar = document.createElement('div'),\n        indicator = document.createElement('div');\n\n    if ( type === true ) {\n        scrollbar.style.cssText = 'position:absolute;z-index:9999';\n        indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\n    }\n\n    indicator.className = 'iScrollIndicator';\n\n    if ( direction == 'h' ) {\n        if ( type === true ) {\n            scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n            indicator.style.height = '100%';\n        }\n        scrollbar.className = 'iScrollHorizontalScrollbar';\n    } else {\n        if ( type === true ) {\n            scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n            indicator.style.width = '100%';\n        }\n        scrollbar.className = 'iScrollVerticalScrollbar';\n    }\n\n    scrollbar.style.cssText += ';overflow:hidden';\n\n    if ( !interactive ) {\n        scrollbar.style.pointerEvents = 'none';\n    }\n\n    scrollbar.appendChild(indicator);\n\n    return scrollbar;\n}\n\nfunction Indicator (scroller, options) {\n    this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n    this.wrapperStyle = this.wrapper.style;\n    this.indicator = this.wrapper.children[0];\n    this.indicatorStyle = this.indicator.style;\n    this.scroller = scroller;\n\n    this.options = {\n        listenX: true,\n        listenY: true,\n        interactive: false,\n        resize: true,\n        defaultScrollbars: false,\n        shrink: false,\n        fade: false,\n        speedRatioX: 0,\n        speedRatioY: 0\n    };\n\n    for ( var i in options ) {\n        this.options[i] = options[i];\n    }\n\n    this.sizeRatioX = 1;\n    this.sizeRatioY = 1;\n    this.maxPosX = 0;\n    this.maxPosY = 0;\n\n    if ( this.options.interactive ) {\n        if ( !this.options.disableTouch ) {\n            utils.addEvent(this.indicator, 'touchstart', this);\n            utils.addEvent(window, 'touchend', this);\n        }\n        if ( !this.options.disablePointer ) {\n            utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n            utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\n        }\n        if ( !this.options.disableMouse ) {\n            utils.addEvent(this.indicator, 'mousedown', this);\n            utils.addEvent(window, 'mouseup', this);\n        }\n    }\n\n    if ( this.options.fade ) {\n        this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\n        var durationProp = utils.style.transitionDuration;\n        if(!durationProp) {\n            return;\n        }\n        this.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms';\n        // remove 0.0001ms\n        var self = this;\n        if(utils.isBadAndroid) {\n            rAF(function() {\n                if(self.wrapperStyle[durationProp] === '0.0001ms') {\n                    self.wrapperStyle[durationProp] = '0s';\n                }\n            });\n        }\n        this.wrapperStyle.opacity = '0';\n    }\n}\n\nIndicator.prototype = {\n    handleEvent: function (e) {\n        switch ( e.type ) {\n            case 'touchstart':\n            case 'pointerdown':\n            case 'MSPointerDown':\n            case 'mousedown':\n                this._start(e);\n                break;\n            case 'touchmove':\n            case 'pointermove':\n            case 'MSPointerMove':\n            case 'mousemove':\n                this._move(e);\n                break;\n            case 'touchend':\n            case 'pointerup':\n            case 'MSPointerUp':\n            case 'mouseup':\n            case 'touchcancel':\n            case 'pointercancel':\n            case 'MSPointerCancel':\n            case 'mousecancel':\n                this._end(e);\n                break;\n        }\n    },\n\n    destroy: function () {\n        if ( this.options.fadeScrollbars ) {\n            clearTimeout(this.fadeTimeout);\n            this.fadeTimeout = null;\n        }\n        if ( this.options.interactive ) {\n            utils.removeEvent(this.indicator, 'touchstart', this);\n            utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n            utils.removeEvent(this.indicator, 'mousedown', this);\n\n            utils.removeEvent(window, 'touchmove', this);\n            utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n            utils.removeEvent(window, 'mousemove', this);\n\n            utils.removeEvent(window, 'touchend', this);\n            utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\n            utils.removeEvent(window, 'mouseup', this);\n        }\n\n        if ( this.options.defaultScrollbars ) {\n            this.wrapper.parentNode.removeChild(this.wrapper);\n        }\n    },\n\n    _start: function (e) {\n        var point = e.touches ? e.touches[0] : e;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.transitionTime();\n\n        this.initiated = true;\n        this.moved = false;\n        this.lastPointX = point.pageX;\n        this.lastPointY = point.pageY;\n\n        this.startTime  = utils.getTime();\n\n        if ( !this.options.disableTouch ) {\n            utils.addEvent(window, 'touchmove', this);\n        }\n        if ( !this.options.disablePointer ) {\n            utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\n        }\n        if ( !this.options.disableMouse ) {\n            utils.addEvent(window, 'mousemove', this);\n        }\n\n        this.scroller._execEvent('beforeScrollStart');\n    },\n\n    _move: function (e) {\n        var point = e.touches ? e.touches[0] : e,\n            deltaX, deltaY,\n            newX, newY,\n            timestamp = utils.getTime();\n\n        if ( !this.moved ) {\n            this.scroller._execEvent('scrollStart');\n        }\n\n        this.moved = true;\n\n        deltaX = point.pageX - this.lastPointX;\n        this.lastPointX = point.pageX;\n\n        deltaY = point.pageY - this.lastPointY;\n        this.lastPointY = point.pageY;\n\n        newX = this.x + deltaX;\n        newY = this.y + deltaY;\n\n        this._pos(newX, newY);\n\n\n        if ( this.scroller.options.probeType == 1 && timestamp - this.startTime > 300 ) {\n            this.startTime = timestamp;\n            this.scroller._execEvent('scroll');\n        } else if ( this.scroller.options.probeType > 1 ) {\n            this.scroller._execEvent('scroll');\n        }\n\n\n// INSERT POINT: indicator._move\n\n        e.preventDefault();\n        e.stopPropagation();\n    },\n\n    _end: function (e) {\n        if ( !this.initiated ) {\n            return;\n        }\n\n        this.initiated = false;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        utils.removeEvent(window, 'touchmove', this);\n        utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n        utils.removeEvent(window, 'mousemove', this);\n\n        if ( this.scroller.options.snap ) {\n            var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n            var time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(this.scroller.x - snap.x), 1000),\n                        Math.min(Math.abs(this.scroller.y - snap.y), 1000)\n                    ), 300);\n\n            if ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {\n                this.scroller.directionX = 0;\n                this.scroller.directionY = 0;\n                this.scroller.currentPage = snap;\n                this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\n            }\n        }\n\n        if ( this.moved ) {\n            this.scroller._execEvent('scrollEnd');\n        }\n    },\n\n    transitionTime: function (time) {\n        time = time || 0;\n        var durationProp = utils.style.transitionDuration;\n        if(!durationProp) {\n            return;\n        }\n\n        this.indicatorStyle[durationProp] = time + 'ms';\n\n        if ( !time && utils.isBadAndroid ) {\n            this.indicatorStyle[durationProp] = '0.0001ms';\n            // remove 0.0001ms\n            var self = this;\n            rAF(function() {\n                if(self.indicatorStyle[durationProp] === '0.0001ms') {\n                    self.indicatorStyle[durationProp] = '0s';\n                }\n            });\n        }\n    },\n\n    transitionTimingFunction: function (easing) {\n        this.indicatorStyle[utils.style.transitionTimingFunction] = easing;\n    },\n\n    refresh: function () {\n        this.transitionTime();\n\n        if ( this.options.listenX && !this.options.listenY ) {\n            this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n        } else if ( this.options.listenY && !this.options.listenX ) {\n            this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n        } else {\n            this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n        }\n\n        if ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {\n            utils.addClass(this.wrapper, 'iScrollBothScrollbars');\n            utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\n\n            if ( this.options.defaultScrollbars && this.options.customStyle ) {\n                if ( this.options.listenX ) {\n                    this.wrapper.style.right = '8px';\n                } else {\n                    this.wrapper.style.bottom = '8px';\n                }\n            }\n        } else {\n            utils.removeClass(this.wrapper, 'iScrollBothScrollbars');\n            utils.addClass(this.wrapper, 'iScrollLoneScrollbar');\n\n            if ( this.options.defaultScrollbars && this.options.customStyle ) {\n                if ( this.options.listenX ) {\n                    this.wrapper.style.right = '2px';\n                } else {\n                    this.wrapper.style.bottom = '2px';\n                }\n            }\n        }\n\n        var r = this.wrapper.offsetHeight;  // force refresh\n\n        if ( this.options.listenX ) {\n            this.wrapperWidth = this.wrapper.clientWidth;\n            if ( this.options.resize ) {\n                this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n                this.indicatorStyle.width = this.indicatorWidth + 'px';\n            } else {\n                this.indicatorWidth = this.indicator.clientWidth;\n            }\n\n            this.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n            if ( this.options.shrink == 'clip' ) {\n                this.minBoundaryX = -this.indicatorWidth + 8;\n                this.maxBoundaryX = this.wrapperWidth - 8;\n            } else {\n                this.minBoundaryX = 0;\n                this.maxBoundaryX = this.maxPosX;\n            }\n\n            this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n        }\n\n        if ( this.options.listenY ) {\n            this.wrapperHeight = this.wrapper.clientHeight;\n            if ( this.options.resize ) {\n                this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n                this.indicatorStyle.height = this.indicatorHeight + 'px';\n            } else {\n                this.indicatorHeight = this.indicator.clientHeight;\n            }\n\n            this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n            if ( this.options.shrink == 'clip' ) {\n                this.minBoundaryY = -this.indicatorHeight + 8;\n                this.maxBoundaryY = this.wrapperHeight - 8;\n            } else {\n                this.minBoundaryY = 0;\n                this.maxBoundaryY = this.maxPosY;\n            }\n\n            this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n            this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n        }\n\n        this.updatePosition();\n    },\n\n    updatePosition: function () {\n        var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n            y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n        if ( !this.options.ignoreBoundaries ) {\n            if ( x < this.minBoundaryX ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.width = Math.max(this.indicatorWidth + x, 8);\n                    this.indicatorStyle.width = this.width + 'px';\n                }\n                x = this.minBoundaryX;\n            } else if ( x > this.maxBoundaryX ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n                    this.indicatorStyle.width = this.width + 'px';\n                    x = this.maxPosX + this.indicatorWidth - this.width;\n                } else {\n                    x = this.maxBoundaryX;\n                }\n            } else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {\n                this.width = this.indicatorWidth;\n                this.indicatorStyle.width = this.width + 'px';\n            }\n\n            if ( y < this.minBoundaryY ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.height = Math.max(this.indicatorHeight + y * 3, 8);\n                    this.indicatorStyle.height = this.height + 'px';\n                }\n                y = this.minBoundaryY;\n            } else if ( y > this.maxBoundaryY ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n                    this.indicatorStyle.height = this.height + 'px';\n                    y = this.maxPosY + this.indicatorHeight - this.height;\n                } else {\n                    y = this.maxBoundaryY;\n                }\n            } else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {\n                this.height = this.indicatorHeight;\n                this.indicatorStyle.height = this.height + 'px';\n            }\n        }\n\n        this.x = x;\n        this.y = y;\n\n        if ( this.scroller.options.useTransform ) {\n            this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\n        } else {\n            this.indicatorStyle.left = x + 'px';\n            this.indicatorStyle.top = y + 'px';\n        }\n    },\n\n    _pos: function (x, y) {\n        if ( x < 0 ) {\n            x = 0;\n        } else if ( x > this.maxPosX ) {\n            x = this.maxPosX;\n        }\n\n        if ( y < 0 ) {\n            y = 0;\n        } else if ( y > this.maxPosY ) {\n            y = this.maxPosY;\n        }\n\n        x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\n        y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\n\n        this.scroller.scrollTo(x, y);\n    },\n\n    fade: function (val, hold) {\n        if ( hold && !this.visible ) {\n            return;\n        }\n\n        clearTimeout(this.fadeTimeout);\n        this.fadeTimeout = null;\n\n        var time = val ? 250 : 500,\n            delay = val ? 0 : 300;\n\n        val = val ? '1' : '0';\n\n        this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\n\n        this.fadeTimeout = setTimeout((function (val) {\n            this.wrapperStyle.opacity = val;\n            this.visible = +val;\n        }).bind(this, val), delay);\n    }\n};\n\nIScroll.utils = utils;\n\nif ( typeof module != 'undefined' && module.exports ) {\n    module.exports = IScroll;\n} else if ( typeof define == 'function' && define.amd ) {\n        define( function () { return IScroll; } );\n} else {\n    window.IScroll = IScroll;\n}\n\n})(window, document, Math);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/iscroll-probe.js\n// module id = 1\n// module chunks = 0","const TEMPLATE = `\n<div id=\"stage\"></div>\n<canvas id=\"stage-noise\"></canvas>\n<div id=\"stage-minimap\">\n    <canvas class=\"map\"></canvas>\n    <div class=\"indicator\"></div>\n</div>\n<div id=\"logo\"></div>\n`;\n\n(function(fn) {\n\n    window.startGame = fn;\n})(function() {\n    var raf = window.requestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                function(fn) {return setTimeout(fn, 1 / 60)};\n\n    var caf = window.cancelAnimationFrame || \n                window.webkitCancelAnimationFrame ||\n                function(id) {clearTimeout(id)};\n\n    function distance(x1, y1, x2, y2) {\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n    }\n\n    function getIndexInMatrix(x, y, width, height) {\n        return (y * width + x) * 4;\n    }\n\n    function getColorVectorInImageData(data, x, y, width, height) {\n        var i = getIndexInMatrix(x, y, width, height);\n        return [\n            data[i],\n            data[i + 1],\n            data[i + 2],\n            data[i + 3]\n        ];\n    }\n\n    function setColorVectorInImageData(data, x, y, width, height, color) {\n        var i = getIndexInMatrix(x, y, width, height);\n        data[i] = color[0];\n        data[i + 1] = color[1];\n        data[i + 2] = color[2];\n        data[i + 3] = color[3];\n    }\n\n    function walkMatrix(x, y, width, height, fn) {\n        for (var i = x; i <= x + width; i++) {\n            for (var j = y; j <= y + height; j++) {\n                fn(i, j);\n            }\n        }\n    }\n\n    function walkCircle(cx, cy, r1, r2, fn) {\n        walkMatrix(cx, cy, r2, r2, function(x, y) {\n            var dist = distance(x, y, cx, cy);\n            if (dist >= r1 && dist <= r2) {\n                fn(x, y);\n            }\n        })\n    }\n\n    document.addEventListener('touchstart', function(e) {\n        e.preventDefault();\n    });\n\n    document.addEventListener('touchmove', function(e) {\n        e.preventDefault();\n    });\n\n    document.addEventListener('touchend', function(e) {\n        e.preventDefault();\n    });\n\n    // viewport\n    var viewport = document.body.getBoundingClientRect();\n\n    // stage\n    var stageEl = document.getElementById('stage');\n    var stageView = stageEl.getBoundingClientRect();\n    stageEl.style.backgroundImage = 'url(assets/galaxy-small.jpg)';\n\n    // map\n    var mapEl = document.getElementById('stage-minimap');\n    var mapView = mapEl.getBoundingClientRect();\n    var mapStageRatio = mapView.width / stageView.width;\n    mapEl.style.height = stageView.height * mapStageRatio + 'px';\n    mapView = mapEl.getBoundingClientRect();\n\n    var mapMiniCanvas = mapEl.querySelector('.map');\n    mapMiniCanvas.width = mapView.width;\n    mapMiniCanvas.height = mapView.height;\n    var mapMiniCtx = mapMiniCanvas.getContext('2d');\n    mapMiniCtx.fillStyle = 'rgba(0, 0, 0, 1)';\n    mapMiniCtx.fillRect(0, 0, mapView.width, mapView.height);\n    var mapIndiEl = mapEl.querySelector('.indicator');  \n    var mapIndiView = mapIndiEl.getBoundingClientRect();\n    \n    function updateMap(x, y) {\n        x = (x + viewport.width / 3) * mapStageRatio - mapIndiView.width / 2;\n        y = (y + viewport.height / 3) * mapStageRatio - mapIndiView.height / 2;\n        mapIndiEl.style.transform = 'translate3d(' \n                                        + x + 'px,' \n                                        + y + 'px, 0px)';\n    }\n\n    function clearMap(x, y) {\n        x *= mapStageRatio;\n        y *= mapStageRatio;\n        var width = viewport.width * mapStageRatio;\n        var height = viewport.height * mapStageRatio;\n        mapMiniCtx.fillStyle = 'rgba(255, 255, 255, 1)';\n        mapMiniCtx.fillRect(x, y, width, height);\n    }\n\n    // noise\n    var stageNoiseCanvas = document.getElementById('stage-noise');\n    var stageNoiseView = stageNoiseCanvas.getBoundingClientRect();\n    stageNoiseCanvas.width = stageNoiseView.width;\n    stageNoiseCanvas.height = stageNoiseView.height;\n    var stageNoiseCtx = stageNoiseCanvas.getContext('2d');\n    stageNoiseCtx.globalCompositeOperation = 'destination-out';\n    \n    var cachedNoiseCanvas = document.createElement('canvas');\n    cachedNoiseCanvas.width = stageView.width;\n    cachedNoiseCanvas.height = stageView.height;\n    var cachedNoiseCtx = cachedNoiseCanvas.getContext('2d');\n    \n    var noiseImageData = new ImageData(stageView.width, stageView.height);\n    function makeNoise() {\n        var simplex = new SimplexNoise();\n        walkMatrix(0, 0, stageView.width, stageView.height,\n            function(x, y) {\n                var value = simplex.noise2D(x, y);\n                if (value > 0.00001) {\n                    setColorVectorInImageData(\n                        noiseImageData.data,\n                        x, y, stageView.width, stageView.height,\n                        [255, 255, 255, value * 255]\n                    );\n                }\n            }\n        );\n\n        cachedNoiseCtx.putImageData(noiseImageData, 0, 0);\n        cachedNoiseCtx.globalCompositeOperation = 'destination-out';\n    }\n\n    function drawNoise(x, y) {\n        stageNoiseCtx.clearRect(0, 0, stageNoiseView.width, stageNoiseView.height);\n        stageNoiseCtx.putImageData(noiseImageData, -x, -y, x, y, stageNoiseView.width, stageNoiseView.height);\n    }\n\n    var clearNoiseId;\n    function startClearNoise(x, y, lastX, lastY, clearByPath) {\n        var startX;\n        var startY;\n        var endX;\n        var endY;\n        var stepAmount;\n\n        if (!clearByPath) {\n            startX = 0;\n            startY = 0;\n            endX = stageNoiseView.width / 2;\n            endY = stageNoiseView.height / 2;\n            stepAmount = 1;\n        } else {\n            var dx = x - lastX;\n            var dy = y - lastY;\n            var rad = Math.atan(dy / dx);\n\n            endX = stageNoiseView.width / 2;\n            endY = stageNoiseView.height / 2;\n            if (x > lastX) {\n                startX = 0;\n            } else {\n                startX = stageNoiseView.width;\n            }\n            startY = endY - (endX - startX) * Math.tan(rad);\n\n            stepAmount = 4;\n        }\n\n        var stepCount = 1;\n        var stepX = (endX - startX) / stepAmount;\n        var stepY = (endY - startY) / stepAmount;\n\n        var steps = [];\n        var radius = 20;\n        for (var i = 1; i <= stepAmount; i++) {\n            var cx = startX + i * stepX;\n            var cy = startY + i * stepY;\n            var r = 0;\n            while (r < Math.abs(stageNoiseView.height - cy) &&\n                    r < stageNoiseView.height / 2) {\n                r += radius;\n                r = Math.min(r, Math.abs(stageNoiseView.height - cy), stageNoiseView.height / 2);\n                steps.push([cx, cy, r]);\n            }\n        }\n\n        // var steps = [];\n        // while (temp.length > 0) {\n        //     for (var i = 0; i < temp.length;) {\n        //         var step = temp[i];\n        //         steps.push(step.shift());\n        //         if (step.length > 0) {\n        //             i++;\n        //         } else {\n        //             temp.splice(i, 1);\n        //         }\n        //     }\n        // }\n\n        function tick() {\n            if (steps.length > 0) {\n                clearNoiseId = raf(tick);\n                var step = steps.shift();\n                var cx = step[0];\n                var cy = step[1];\n                var r = step[2];\n\n                var stageNoiseGradient = stageNoiseCtx.createRadialGradient(cx, cy, 0, cx, cy, r);\n                stageNoiseGradient.addColorStop(0, 'rgba(0, 0, 0, 255)');\n                stageNoiseGradient.addColorStop(0.8, 'rgba(0, 0, 0, 100)');\n                stageNoiseGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');\n\n                stageNoiseCtx.fillStyle = stageNoiseGradient;\n                stageNoiseCtx.beginPath();\n                stageNoiseCtx.arc(cx, cy, r, 0, Math.PI * 2);\n                stageNoiseCtx.fill();\n                stageNoiseCtx.closePath();\n\n                var cachedNoiseGradient = cachedNoiseCtx.createRadialGradient(cx + x, cy + y, 0, cx + x, cy + y, r);\n                cachedNoiseGradient.addColorStop(0, 'rgba(0, 0, 0, 255)');\n                cachedNoiseGradient.addColorStop(0.8, 'rgba(0, 0, 0, 100)');\n                cachedNoiseGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');\n\n                cachedNoiseCtx.fillStyle = cachedNoiseGradient;\n                cachedNoiseCtx.beginPath();\n                cachedNoiseCtx.arc(cx + x, cy + y, r, 0, Math.PI * 2);\n                cachedNoiseCtx.fill();\n                cachedNoiseCtx.closePath(); \n            } else {\n                stopClearNoise();\n            }\n        }\n        clearNoiseId = raf(tick);\n        // console.log(JSON.stringify(steps))\n    }\n\n    function stopClearNoise(x, y) {\n        if (clearNoiseId) {\n            caf(clearNoiseId);\n            clearNoiseId = null;\n            noiseImageData = cachedNoiseCtx.getImageData(0, 0, stageView.width, stageView.height);\n        }\n    }\n\n    makeNoise();\n\n    // scroll\n    var myScroll = new IScroll('#stage-wrap', {\n        mouseWheel: false,\n        deceleration: 0.01,\n        probeType: 3,\n        scrollX: true,\n        scrollY: true,\n        freeScroll: true,\n        bounce: false,\n        disableMouse: true,\n        disablePointer: true\n    }); \n\n    var isScrolling = false;\n    var scrollRecord = [];\n    function scrollStart() {\n        isScrolling = true;\n        var x = Math.round(-myScroll.x);\n        var y = Math.round(-myScroll.y);\n        myScroll.lastX = myScroll.x;\n        myScroll.lastY = myScroll.y;\n        stopClearNoise(x, y);\n    }\n\n    function scroll() {\n        var x = Math.round(-myScroll.x);\n        var y = Math.round(-myScroll.y);\n        updateMap(x, y);\n        drawNoise(x, y);\n    }\n\n    function scrollEnd(clearByPath) {\n        var x = Math.round(-myScroll.x);\n        var y = Math.round(-myScroll.y);\n        var lastX = Math.round(-myScroll.lastX);\n        var lastY = Math.round(-myScroll.lastY);\n        updateMap(x, y);\n        clearMap(x, y);\n        startClearNoise(x, y, lastX, lastY, clearByPath);\n        isScrolling = false;\n    }\n\n    function scrollTo(x, y, clearByPath) {\n        scrollStart();\n        myScroll.scrollTo(x, y);\n        scroll();\n        scrollEnd(clearByPath);\n    }\n\n    myScroll.on('scrollStart', scrollStart);\n    myScroll.on('scroll', scroll);\n    myScroll.on('scrollEnd', function() {\n        scrollEnd(true);\n    });\n    scrollTo(0, -stageView.height + viewport.height);\n\n    var logoEl = document.getElementById('logo');\n    logoEl.style.backgroundImage = 'url(assets/logo.png)';\n    function flashLogo() {\n        function handler() {\n            logoEl.removeEventListener('webkitAnimationEnd', handler);\n            logoEl.className = '';\n            setTimeout(flashLogo, Math.random() * 5000 + 5000);\n        }\n\n        logoEl.addEventListener('webkitAnimationEnd', handler);\n        logoEl.className = 'flash';\n    }\n    setTimeout(flashLogo, 5000);\n\n    // window.myScrollTo = scrollTo\n});\n\n\n// WEBPACK FOOTER //\n// ./src/game.js"],"sourceRoot":""}